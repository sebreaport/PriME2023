<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Level 1</title>
    <link rel="stylesheet" href="OR.css">
  </head>
  <script type="text/javascript">
    const error_list = ["Connect to Road", "Connect to Airport", "Connect to Seaport", "Connect to Power"]
    const building_values = [
      // Condo
      {"Cost": 1,"People": 0, "Planet": -5, "Profit": 10},
      {"Cost": 1.5,"People": 0, "Planet": -20, "Profit": 20},
      {"Cost": 1.5,"People": 20, "Planet": -5, "Profit": 0},
      {"Cost": 3,"People": 20, "Planet": -10, "Profit": 20},
      {"Cost": 5,"People": 0, "Planet": -10, "Profit": 0},
      {"Cost": 0.5,"People": 0, "Planet": 0, "Profit": 0},
    ];
    var map_array = Array.from(Array(21), () => new Array(21));
    var built_array = Array.from(Array(21), () => new Array(21));
    var error_array = Array.from({length: 21}, () => Array.from({length: 21}, () => error_list));
    var building_name = 1;
    var budget = 40;
    var helpout = 1;
    var airport_pos_row = 9;
    var airport_pos_col = 10;
    var seaport_pos_row = 10;
    var seaport_pos_col = 16;
    var people = 0;
    var planet = 500;
    var profit = 0;
    var boxes2;

    window.onload= function(){
      var temp;
      const boxes = document.querySelectorAll('.main_cell');
      boxes.forEach(box => {
        temp = box.className
        // extracts map_array from classname of html
        map_array[parseInt(temp[temp.length-5]+""+temp[temp.length-4])][parseInt(temp[temp.length-2]+""+temp[temp.length-1])] = temp.slice(temp.length-17,temp.length-7);
      });
      // Hover states
      for (var hrow = 0; hrow < map_array.length; hrow++) {
        for (var hcol = 0; hcol < map_array[0].length; hcol++) {
          try {document.getElementsByClassName('C'+(hrow).toString().padStart(2, '0')+'_'+(hcol).toString().padStart(2, '0'))[0].addEventListener("mouseenter", Mouse_enter.bind(this, hrow, hcol) );} catch (e) {}
          try {document.getElementsByClassName('C'+(hrow).toString().padStart(2, '0')+'_'+(hcol).toString().padStart(2, '0'))[0].addEventListener("mouseleave", Mouse_leave.bind(this, hrow, hcol) );} catch (e) {}
        }
      }

      Tool_Building(1);
    }

    function Mouse_enter(classrow, classcol){
      if (map_array[classrow][classcol] == "rockz_cell" && building_name == 5) {
        for (var mmi = -2; mmi <= 2; mmi++) {
          for (var mmd = -2; mmd <= 2; mmd++) {
            try {document.getElementsByClassName('C'+(classrow+mmi).toString().padStart(2, '0')+'_'+(classcol+mmd).toString().padStart(2, '0'))[0].classList.add("power_range_hover");} catch (e) {}
          }
        }
      }
      else if (building_name == 5) {
        for (var mi = -1; mi <= 1; mi++) {
          for (var md = -1; md <= 1; md++) {
            try {document.getElementsByClassName('C'+(classrow+mi).toString().padStart(2, '0')+'_'+(classcol+md).toString().padStart(2, '0'))[0].classList.add("power_range_hover");} catch (e) {}
          }
        }
      }
    }

    function Mouse_leave(classrow, classcol){
      if (map_array[classrow][classcol] == "rockz_cell" && building_name == 5) {
        for (var mmi = -2; mmi <= 2; mmi++) {
          for (var mmd = -2; mmd <= 2; mmd++) {
            try {document.getElementsByClassName('C'+(classrow+mmi).toString().padStart(2, '0')+'_'+(classcol+mmd).toString().padStart(2, '0'))[0].classList.remove("power_range_hover");} catch (e) {}
          }
        }
      }
      else {
        for (var mi = -1; mi <= 1; mi++) {
          for (var md = -1; md <= 1; md++) {
            try {document.getElementsByClassName('C'+(classrow+mi).toString().padStart(2, '0')+'_'+(classcol+md).toString().padStart(2, '0'))[0].classList.remove("power_range_hover");} catch (e) {}
          }
        }
      }

    }

    function Tool_Building(current_building){
      // reset not selected
      document.getElementsByClassName("buildings")[0].classList.remove("selected");
      document.getElementsByClassName("buildings")[1].classList.remove("selected");
      document.getElementsByClassName("buildings")[2].classList.remove("selected");
      document.getElementsByClassName("buildings")[3].classList.remove("selected");
      document.getElementsByClassName("buildings")[4].classList.remove("selected");
      document.getElementsByClassName("buildings")[5].classList.remove("selected");
      // make the button look selected
      document.getElementsByClassName("buildings")[current_building-1].classList.add("selected")
      for (var irow = 0; irow < map_array.length; irow++) {
        for (var icol = 0; icol < map_array[0].length; icol++) {
          // For normal buildings if empty
          if (built_array[irow][icol] == null) {
            // Replace every cell with the new selected building
            try {
              document.getElementsByClassName('C'+irow.toString().padStart(2, '0')+'_'+icol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_url', "url('Images/building"+current_building+".png')");
              document.getElementsByClassName('C'+irow.toString().padStart(2, '0')+'_'+icol.toString().padStart(2, '0'))[0].style.pointerEvents = "auto";
            }catch {}
          }
        }
      }
      // for power visualization
      // for power visualization
      boxes2 = document.querySelectorAll('.main_cell');
      if (current_building == 5) {
        boxes2.forEach(box => {
          box.style.setProperty('--linear_BG', 'repeating-linear-gradient(36deg, rgba(255,255,255, 1), rgba(255,255,255, 1) 1px, transparent 2px, transparent 2px)');
        });
      }
      else {
        boxes2.forEach(box => {
          box.style.setProperty('--linear_BG', 'none');
        });
      }


      // Other functions
      building_name = current_building;
      Check_road_validity();
      Put_Errors();
    }

    function Check_road_validity(){

      // remove invalid from airport and seaport; immune
      error_array[airport_pos_row][airport_pos_col] = "";
      error_array[seaport_pos_row][seaport_pos_col] = "";
      // No pointer events
      document.getElementsByClassName('C'+airport_pos_row.toString().padStart(2, '0')+'_'+airport_pos_col.toString().padStart(2, '0'))[0].style.pointerEvents = "none";
      document.getElementsByClassName('C'+seaport_pos_row.toString().padStart(2, '0')+'_'+seaport_pos_col.toString().padStart(2, '0'))[0].style.pointerEvents = "none";
      // Output Images
      document.getElementsByClassName('C'+airport_pos_row.toString().padStart(2, '0')+'_'+airport_pos_col.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_url', "url('Images/airport.png')");
      document.getElementsByClassName('C'+seaport_pos_row.toString().padStart(2, '0')+'_'+seaport_pos_col.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_url', "url('Images/seaport.png')");
      document.getElementsByClassName('C'+airport_pos_row.toString().padStart(2, '0')+'_'+airport_pos_col.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_bpos', 'bottom');
      document.getElementsByClassName('C'+seaport_pos_row.toString().padStart(2, '0')+'_'+seaport_pos_col.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_bpos', 'bottom');
      document.getElementsByClassName('C'+airport_pos_row.toString().padStart(2, '0')+'_'+airport_pos_col.toString().padStart(2, '0'))[0].style.border = "5px dashed #E8C46E";
      document.getElementsByClassName('C'+seaport_pos_row.toString().padStart(2, '0')+'_'+seaport_pos_col.toString().padStart(2, '0'))[0].style.border = "5px dashed #E8C46E";
      document.getElementsByClassName('C'+airport_pos_row.toString().padStart(2, '0')+'_'+airport_pos_col.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_opacity', 1);
      document.getElementsByClassName('C'+airport_pos_row.toString().padStart(2, '0')+'_'+airport_pos_col.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_filter', 'grayscale(0%)');
      document.getElementsByClassName('C'+seaport_pos_row.toString().padStart(2, '0')+'_'+seaport_pos_col.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_opacity', 1);
      document.getElementsByClassName('C'+seaport_pos_row.toString().padStart(2, '0')+'_'+seaport_pos_col.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_filter', 'grayscale(0%)');
      // Count them as "roads"
      built_array[airport_pos_row][airport_pos_col] = 6;
      built_array[seaport_pos_row][seaport_pos_col] = 6;
      // Put them in map_array
      map_array[airport_pos_row][airport_pos_col] = "airport"
      map_array[seaport_pos_row][seaport_pos_col] = "seaport"
      // Redo all power cell activated visualization
      for (var prow = 0; prow < map_array.length; prow++) {
        for (var pcol = 0; pcol < map_array[0].length; pcol++) {
          try {document.getElementsByClassName('C'+(prow).toString().padStart(2, '0')+'_'+(pcol).toString().padStart(2, '0'))[0].classList.remove("power_range");} catch (e) {}
        }
      }



      for (var rrow = 0; rrow < map_array.length; rrow++) {
        for (var rcol = 0; rcol < map_array[0].length; rcol++) {
          // Remove road error for windmills (using windmill tool || having windmill)
          if((building_name == 5 && built_array[rrow][rcol] == null) || built_array[rrow][rcol] == 5) {
            try {error_array[rrow][rcol] = error_array[rrow][rcol].filter(element => element != "Connect to Road");} catch (e) {}
            try {error_array[rrow][rcol] = error_array[rrow][rcol].filter(element => element != "Connect to Airport");} catch (e) {}
            try {error_array[rrow][rcol] = error_array[rrow][rcol].filter(element => element != "Connect to Seaport");} catch (e) {}
            try {error_array[rrow][rcol] = error_array[rrow][rcol].filter(element => element != "Connect to Power");} catch (e) {}
          }

          if (built_array[rrow][rcol] == 6){
            // Road errors
            try {error_array[rrow][rcol] = error_array[rrow][rcol].filter(element => element != "Connect to Road");} catch (e) {}
            try {error_array[rrow][rcol] = error_array[rrow][rcol].filter(element => element != "Connect to Power");} catch (e) {}
            try {error_array[rrow][rcol-1] = error_array[rrow][rcol-1].filter(element => element != "Connect to Road");} catch (e) {}
            try {error_array[rrow+1][rcol] = error_array[rrow+1][rcol].filter(element => element != "Connect to Road");} catch (e) {}
            try {error_array[rrow][rcol+1] = error_array[rrow][rcol+1].filter(element => element != "Connect to Road");} catch (e) {}
            try {error_array[rrow-1][rcol] = error_array[rrow-1][rcol].filter(element => element != "Connect to Road");} catch (e) {}
          }
          else if (built_array[rrow][rcol] == 5) {
            // Power errors
            if (map_array[rrow][rcol] == "rockz_cell") {
              for (var di = -2; di <= 2; di++) {
                for (var dd = -2; dd <= 2; dd++) {
                  try {error_array[rrow+dd][rcol+di] = error_array[rrow+dd][rcol+di].filter(element => element != "Connect to Power");} catch (e) {}
                  try {document.getElementsByClassName('C'+(rrow+dd).toString().padStart(2, '0')+'_'+(rcol+di).toString().padStart(2, '0'))[0].classList.add("power_range");} catch (e) {}
                }
              }
            }
            else {
              for (var di = -1; di <= 1; di++) {
                for (var dd = -1; dd <= 1; dd++) {
                  try {error_array[rrow+dd][rcol+di] = error_array[rrow+dd][rcol+di].filter(element => element != "Connect to Power");} catch (e) {}
                  try {document.getElementsByClassName('C'+(rrow+dd).toString().padStart(2, '0')+'_'+(rcol+di).toString().padStart(2, '0'))[0].classList.add("power_range");} catch (e) {}
                }
              }
            }

          }
          else if (map_array[rrow][rcol] == "water_cell") {
            // Water errors
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.pointerEvents = "none";
          }
          else if(map_array[rrow][rcol] == "sandz_tree"){
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.pointerEvents = "none";
            built_array[rrow][rcol] = 7;
            error_array[rrow][rcol] = "";
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_url', "url('Images/tree.png')");
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_hover_opacity', 1);
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_filter', 'grayscale(0%)');
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_posstrans', '0s');
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_opacity', 1);
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_bpos', 'bottom');
          }
          else if(map_array[rrow][rcol] == "leafz_tree"){
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.pointerEvents = "none";
            built_array[rrow][rcol] = 7;
            error_array[rrow][rcol] = "";
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_url', "url('Images/tree2.png')");
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_hover_opacity', 1);
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_filter', 'grayscale(0%)');
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_posstrans', '0s');
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_opacity', 1);
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_bpos', 'bottom');
          }
          else if(map_array[rrow][rcol] == "grass_moun"){
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.pointerEvents = "none";
            built_array[rrow][rcol] = 7;
            error_array[rrow][rcol] = "";
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_url', "url('Images/mountains.png')");
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_hover_opacity', 1);
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_filter', 'grayscale(0%)');
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_posstrans', '0s');
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_opacity', 1);
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_bpos', 'bottom');
          }
          else if(map_array[rrow][rcol] == "rockz_moun"){
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.pointerEvents = "none";
            built_array[rrow][rcol] = 7;
            error_array[rrow][rcol] = "";
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_url', "url('Images/mountains2.png')");
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_hover_opacity', 1);
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_filter', 'grayscale(0%)');
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_posstrans', '0s');
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_opacity', 1);
            document.getElementsByClassName('C'+rrow.toString().padStart(2, '0')+'_'+rcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_bpos', 'bottom');
          }
        }
      }

      // flood formulas airport
      let airport_flood_to = [[airport_pos_row,airport_pos_col]];
      let airport_flooded = [];
      while (airport_flood_to.length > 0) {
        // remove invalid from "road validity" for everything around roads. We have "try" just in case it doesnt have error already
        try {error_array[airport_flood_to[0][0]][airport_flood_to[0][1]-1] = error_array[airport_flood_to[0][0]][airport_flood_to[0][1]-1].filter(element => element != "Connect to Airport");} catch (e) {}
        try {error_array[airport_flood_to[0][0]+1][airport_flood_to[0][1]] = error_array[airport_flood_to[0][0]+1][airport_flood_to[0][1]].filter(element => element != "Connect to Airport");} catch (e) {}
        try {error_array[airport_flood_to[0][0]][airport_flood_to[0][1]+1] = error_array[airport_flood_to[0][0]][airport_flood_to[0][1]+1].filter(element => element != "Connect to Airport");} catch (e) {}
        try {error_array[airport_flood_to[0][0]-1][airport_flood_to[0][1]] = error_array[airport_flood_to[0][0]-1][airport_flood_to[0][1]].filter(element => element != "Connect to Airport");} catch (e) {}


        if (built_array[airport_flood_to[0][0]][airport_flood_to[0][1]-1] != null) {
          if (built_array[airport_flood_to[0][0]][airport_flood_to[0][1]-1] == 6) {
            // add it to the next_inline if it is a road in order to check next
            airport_flood_to.push([airport_flood_to[0][0], airport_flood_to[0][1]-1])
          }
        } //Repeat:
        if (built_array[airport_flood_to[0][0]+1][airport_flood_to[0][1]] != null) {
          if (built_array[airport_flood_to[0][0]+1][airport_flood_to[0][1]] == 6) {
            airport_flood_to.push([airport_flood_to[0][0]+1, airport_flood_to[0][1]])
          }
        }
        if (built_array[airport_flood_to[0][0]][airport_flood_to[0][1]+1] != null) {
          if (built_array[airport_flood_to[0][0]][airport_flood_to[0][1]+1] == 6) {
            airport_flood_to.push([airport_flood_to[0][0], airport_flood_to[0][1]+1])
          }
        }
        if (built_array[airport_flood_to[0][0]-1][airport_flood_to[0][1]] != null) {
          if (built_array[airport_flood_to[0][0]-1][airport_flood_to[0][1]] == 6) {
            airport_flood_to.push([airport_flood_to[0][0]-1, airport_flood_to[0][1]])
          }
        }
        airport_flooded.push(airport_flood_to.shift())
        airport_flood_to = airport_flood_to.filter(subarray => !airport_flooded.some(otherSubarray => JSON.stringify(otherSubarray) === JSON.stringify(subarray)));
      }
      // flood formulas seaport
      let seaport_flood_to = [[seaport_pos_row,seaport_pos_col]];
      let seaport_flooded = [];
      while (seaport_flood_to.length > 0) {
        // remove invalid from "road validity" for everything around roads. We have "try" just in case it doesnt have error already
        try {error_array[seaport_flood_to[0][0]][seaport_flood_to[0][1]-1] = error_array[seaport_flood_to[0][0]][seaport_flood_to[0][1]-1].filter(element => element != "Connect to Seaport");} catch (e) {}
        try {error_array[seaport_flood_to[0][0]+1][seaport_flood_to[0][1]] = error_array[seaport_flood_to[0][0]+1][seaport_flood_to[0][1]].filter(element => element != "Connect to Seaport");} catch (e) {}
        try {error_array[seaport_flood_to[0][0]][seaport_flood_to[0][1]+1] = error_array[seaport_flood_to[0][0]][seaport_flood_to[0][1]+1].filter(element => element != "Connect to Seaport");} catch (e) {}
        try {error_array[seaport_flood_to[0][0]-1][seaport_flood_to[0][1]] = error_array[seaport_flood_to[0][0]-1][seaport_flood_to[0][1]].filter(element => element != "Connect to Seaport");} catch (e) {}


        if (built_array[seaport_flood_to[0][0]][seaport_flood_to[0][1]-1] != null) {
          if (built_array[seaport_flood_to[0][0]][seaport_flood_to[0][1]-1] == 6) {
            // add it to the next_inline if it is a road in order to check next
            seaport_flood_to.push([seaport_flood_to[0][0], seaport_flood_to[0][1]-1])
          }
        } //Repeat:
        if (built_array[seaport_flood_to[0][0]+1][seaport_flood_to[0][1]] != null) {
          if (built_array[seaport_flood_to[0][0]+1][seaport_flood_to[0][1]] == 6) {
            seaport_flood_to.push([seaport_flood_to[0][0]+1, seaport_flood_to[0][1]])
          }
        }
        if (built_array[seaport_flood_to[0][0]][seaport_flood_to[0][1]+1] != null) {
          if (built_array[seaport_flood_to[0][0]][seaport_flood_to[0][1]+1] == 6) {
            seaport_flood_to.push([seaport_flood_to[0][0], seaport_flood_to[0][1]+1])
          }
        }
        if (built_array[seaport_flood_to[0][0]-1][seaport_flood_to[0][1]] != null) {
          if (built_array[seaport_flood_to[0][0]-1][seaport_flood_to[0][1]] == 6) {
            seaport_flood_to.push([seaport_flood_to[0][0]-1, seaport_flood_to[0][1]])
          }
        }
        seaport_flooded.push(seaport_flood_to.shift())
        seaport_flood_to = seaport_flood_to.filter(subarray => !seaport_flooded.some(otherSubarray => JSON.stringify(otherSubarray) === JSON.stringify(subarray)));
      }

    }

    function Put_Errors(){
      for (var xrow = 0; xrow < map_array.length; xrow++) {
        for (var xcol = 0; xcol < map_array[0].length; xcol++) {
          if(map_array[xrow][xcol] != null){
            // remove all errors
            document.getElementsByClassName('C'+xrow.toString().padStart(2, '0')+'_'+xcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_invalid', "none");
            document.getElementsByClassName('C'+xrow.toString().padStart(2, '0')+'_'+xcol.toString().padStart(2, '0'))[0].style.setProperty('--error_message', "''");
            if (error_array[xrow][xcol].length > 0) {
              // show all error
              document.getElementsByClassName('C'+xrow.toString().padStart(2, '0')+'_'+xcol.toString().padStart(2, '0'))[0].style.setProperty('--main_cell_invalid', "url('Images/Invalid.png')");
              document.getElementsByClassName('C'+xrow.toString().padStart(2, '0')+'_'+xcol.toString().padStart(2, '0'))[0].style.setProperty('--error_message', "'"+ error_array[xrow][xcol][0] + "'");
            }
          }

        }
      }
    }

    function Count_output(){
      // budget and constraints
      people = 0;
      planet = 500;
      profit = 0;

      let condition_2 = "Check";
      let condition_3 = "Check";
      let condition_4 = "Check";
      for (var brow = 0; brow < map_array.length; brow++) {
        for (var bcol = 0; bcol < map_array[0].length; bcol++) {
          // Condition 2
          if (built_array[brow][bcol] != null && (error_array[brow][bcol].includes('Connect to Airport') || error_array[brow][bcol].includes('Connect to Seaport'))) {
            condition_2 = "Cross";
          }
          // Condition 3
          if (built_array[brow][bcol] != null && (error_array[brow][bcol].includes('Connect to Road'))) {
            condition_3 = "Cross";
          }
          // Condition 4
          if (built_array[brow][bcol] != null && (error_array[brow][bcol].includes('Connect to Power'))) {
            condition_4 = "Cross";
          }
          // Condition 6
          if (built_array[brow][bcol] == 4 && map_array[brow][bcol] == "sandz_cell") {
            document.getElementsByClassName('C'+(brow).toString().padStart(2, '0')+'_'+(bcol).toString().padStart(2, '0'))[0].style.setProperty('--main_cell_url', "url('Images/building4plus.png')");
          }
          // Getting Score ONLY IF VALID
          if (built_array[brow][bcol] != null && !error_array[brow][bcol].includes('Connect to Airport') && !error_array[brow][bcol].includes('Connect to Seaport') && !error_array[brow][bcol].includes('Connect to Road') && !error_array[brow][bcol].includes('Connect to Power')) {
            try {people += building_values[built_array[brow][bcol]-1]["People"]} catch (e) {}
            try {planet += building_values[built_array[brow][bcol]-1]["Planet"]} catch (e) {}
            try {profit += building_values[built_array[brow][bcol]-1]["Profit"]} catch (e) {}
          }

          //put error back in error Array
          error_array[brow][bcol] = error_list;
        }
      }

      // Condition 1
      if (people >= profit) {
        document.getElementsByClassName('condition_img')[2 - 1].src = "Images/Check.png"
      }
      else {
        document.getElementsByClassName('condition_img')[2 - 1].src = "Images/Cross.png"
      }
      if (budget >= 0) {
        document.getElementsByClassName('budget_img')[0].src = "Images/Check.png"
      }
      else {
        document.getElementsByClassName('budget_img')[0].src = "Images/Cross.png"
      }

      document.getElementsByClassName('condition_img')[2 - 1].src = "Images/" + condition_2 + ".png"
      document.getElementsByClassName('condition_img')[3 - 1].src = "Images/" + condition_3 + ".png"
      document.getElementsByClassName('condition_img')[4 - 1].src = "Images/" + condition_4 + ".png"
      document.getElementsByClassName("budget")[0].innerHTML = budget + "M";
      document.getElementsByClassName("subscore")[1].innerHTML = people + " points";
      document.getElementsByClassName("subscore")[3].innerHTML = planet + " points";
      document.getElementsByClassName("subscore")[5].innerHTML = profit + " points";
      document.getElementsByClassName("totalscore")[1].innerHTML = (people + planet + profit) + " points";

      // For submission
      if (people >= profit && condition_2 == "Check" && condition_3 == "Check" && condition_4 == "Check" && budget >= 0) {
        document.getElementsByClassName('submit_top')[0].innerHTML = "Confirm submission?"
        document.getElementsByClassName('yessubmit')[0].style.display = "block"
      }
      else if(budget >= 0) {
        document.getElementsByClassName('submit_top')[0].innerHTML = "Please follow all provided conditions"
        document.getElementsByClassName('yessubmit')[0].style.display = "none"
      }
      else {
        document.getElementsByClassName('submit_top')[0].innerHTML = "Please follow provided budget"
        document.getElementsByClassName('yessubmit')[0].style.display = "none"
      }
    }

    function Click_Cell(row, col){
      let row_s = row.toString().padStart(2, '0');
      let col_s = col.toString().padStart(2, '0');
      // BUILD:
      if (built_array[row][col] == null) {
        budget -= building_values[building_name-1]["Cost"]
        built_array[row][col] = building_name;
        // For roads
        if (building_name == 6) {

          let road_connections = ""
          if (built_array[row][col-1] == 6) {road_connections += "A"}
          if (built_array[row+1][col] == 6) {road_connections += "B"}
          if (built_array[row][col+1] == 6) {road_connections += "C"}
          if (built_array[row-1][col] == 6) {road_connections += "D"}
          document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_url', "url('Images/Road" + road_connections+".png')");
          // For roads beside
          if (built_array[row][col-1] == 6 && map_array[row][col-1] != "airport" && map_array[row][col-1] != "seaport") {
            let road_connectionsA = ""
            if (built_array[row][col-2] == 6) {road_connectionsA += "A"}
            if (built_array[row+1][col-1] == 6) {road_connectionsA += "B"}
            road_connectionsA += "C";
            if (built_array[row-1][col-1] == 6) {road_connectionsA += "D"}
            document.getElementsByClassName('C'+(row).toString().padStart(2, '0')+'_'+(col-1).toString().padStart(2, '0'))[0].style.setProperty('--main_cell_url', "url('Images/Road" + road_connectionsA+".png')");
          }
          if (built_array[row+1][col] == 6 && map_array[row+1][col] != "airport" && map_array[row+1][col] != "seaport") {
            let road_connectionsB = ""
            if (built_array[row+1][col-1] == 6) {road_connectionsB += "A"}
            if (built_array[row+2][col] == 6) {road_connectionsB += "B"}
            if (built_array[row+1][col+1] == 6) {road_connectionsB += "C"}
            road_connectionsB += "D";
            document.getElementsByClassName('C'+(row+1).toString().padStart(2, '0')+'_'+(col).toString().padStart(2, '0'))[0].style.setProperty('--main_cell_url', "url('Images/Road" + road_connectionsB+".png')");
          }
          if (built_array[row][col+1] == 6 && map_array[row][col+1] != "airport" && map_array[row][col+1] != "seaport") {
            let road_connectionsC = ""
            road_connectionsC += "A";
            if (built_array[row+1][col+1] == 6) {road_connectionsC += "B"}
            if (built_array[row][col+2] == 6) {road_connectionsC += "C"}
            if (built_array[row-1][col+1] == 6) {road_connectionsC += "D"}
            document.getElementsByClassName('C'+(row).toString().padStart(2, '0')+'_'+(col+1).toString().padStart(2, '0'))[0].style.setProperty('--main_cell_url', "url('Images/Road" + road_connectionsC+".png')");
          }
          if (built_array[row-1][col] == 6 && map_array[row-1][col] != "airport" && map_array[row-1][col] != "seaport") {
            let road_connectionsD = ""
            if (built_array[row-1][col-1] == 6) {road_connectionsD += "A"}
            road_connectionsD += "B";
            if (built_array[row-1][col+1] == 6) {road_connectionsD += "C"}
            if (built_array[row-2][col] == 6) {road_connectionsD += "D"}
            document.getElementsByClassName('C'+(row-1).toString().padStart(2, '0')+'_'+(col).toString().padStart(2, '0'))[0].style.setProperty('--main_cell_url', "url('Images/Road" + road_connectionsD+".png')");
          }
          // Build: Road animations
          document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_bpos', '90px'); //Background position
          document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_hover_bpos', '90px');
          // document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_opacity', 0.5);
        }
        // For general
        else {
          document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_url', "url('Images/building"+building_name+".png')");
          switch (building_name) {
            case 1:
              document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_bpos', '60px'); //Background position
              document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_hover_bpos', '60px');
              break;
            case 5:
            case 6:
              document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_bpos', '90px'); //Background position
              document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_hover_bpos', '90px');
              break;
            default:
            document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_bpos', '50px'); //Background position
            document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_hover_bpos', '50px');
          }
        }
        // Build: All animations
        document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_hover_opacity', 1);
        document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_filter', 'grayscale(0%)');
        document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_posstrans', '0s'); //Transition
        document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_arrow_opacity', 1);
        // Animation thingz
        setTimeout(function() {
          document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_posstrans', '2s');
          document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_bpos', 'bottom');
          document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_hover_bpos', 'bottom');
          document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_opacity', 1);
        }, 1);
        // When it fully grows
        setTimeout(function() {
          document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_hover_opacity', 0.5);
          document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_hover_opatrans', "0.1s");
        }, 2000);
        // When it fully grows and opacity goes lower
        setTimeout(function() {
          document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_hover_opatrans', "0s");
        }, 2100);
      }
      // DESTROY:
      else{
        budget += building_values[built_array[row][col]-1]["Cost"]
        built_array[row][col] = null;
        // DESTROY: For roads beside
        if (built_array[row][col-1] == 6) {
          let road_connectionsA = ""
          if (built_array[row][col-2] == 6) {road_connectionsA += "A"}
          if (built_array[row+1][col-1] == 6) {road_connectionsA += "B"}
          road_connectionsA += "";
          if (built_array[row-1][col-1] == 6) {road_connectionsA += "D"}
          document.getElementsByClassName('C'+(row).toString().padStart(2, '0')+'_'+(col-1).toString().padStart(2, '0'))[0].style.setProperty('--main_cell_url', "url('Images/Road" + road_connectionsA+".png')");
        }
        if (built_array[row+1][col] == 6) {
          let road_connectionsB = ""
          if (built_array[row+1][col-1] == 6) {road_connectionsB += "A"}
          if (built_array[row+2][col] == 6) {road_connectionsB += "B"}
          if (built_array[row+1][col+1] == 6) {road_connectionsB += "C"}
          road_connectionsB += "";
          document.getElementsByClassName('C'+(row+1).toString().padStart(2, '0')+'_'+(col).toString().padStart(2, '0'))[0].style.setProperty('--main_cell_url', "url('Images/Road" + road_connectionsB+".png')");
        }
        if (built_array[row][col+1] == 6) {
          let road_connectionsC = ""
          road_connectionsC += "";
          if (built_array[row+1][col+1] == 6) {road_connectionsC += "B"}
          if (built_array[row][col+2] == 6) {road_connectionsC += "C"}
          if (built_array[row-1][col+1] == 6) {road_connectionsC += "D"}
          document.getElementsByClassName('C'+(row).toString().padStart(2, '0')+'_'+(col+1).toString().padStart(2, '0'))[0].style.setProperty('--main_cell_url', "url('Images/Road" + road_connectionsC+".png')");
        }
        if (built_array[row-1][col] == 6) {
          let road_connectionsD = ""
          if (built_array[row-1][col-1] == 6) {road_connectionsD += "A"}
          road_connectionsD += "";
          if (built_array[row-1][col+1] == 6) {road_connectionsD += "C"}
          if (built_array[row-2][col] == 6) {road_connectionsD += "D"}
          document.getElementsByClassName('C'+(row-1).toString().padStart(2, '0')+'_'+(col).toString().padStart(2, '0'))[0].style.setProperty('--main_cell_url', "url('Images/Road" + road_connectionsD+".png')");
        }
        // destroy animations:
        document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_opacity', 0);
        document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_posstrans', '0.3s');
        document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_bpos', '50px');
        document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_hover_bpos', '50px');
        document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_arrow_opacity', 0);
        // When it arrives on position after built:
        setTimeout(function() {
          document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_hover_bpos', 'bottom');
          document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_posstrans', '0.2s');
          document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_hover_opacity', 0.4);
          document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_filter', 'grayscale(100%)');
          document.getElementsByClassName('C'+row_s+'_'+col_s)[0].style.setProperty('--main_cell_url', "url('Images/building"+building_name+".png')");
        }, 400);

      }
      Check_road_validity();
      Put_Errors();
      Count_output();
    }

    function Submit_appear(){
      document.getElementsByClassName('submitmodal')[0].style.visibility = "visible";
      document.getElementsByClassName('submitmodal')[0].style.opacity = "1";
    }

    function Submit_disappear(){
      document.getElementsByClassName('submitmodal')[0].style.visibility = "hidden";
      document.getElementsByClassName('submitmodal')[0].style.opacity = "0";
    }

    function help(){
      if (helpout == 0) {
        document.getElementsByClassName('helpboxcont')[0].style.visibility = "visible";
        document.getElementsByClassName('helpboxcont')[0].style.opacity = "1";
        helpout = 1;
      }
      else {
        document.getElementsByClassName('helpboxcont')[0].style.visibility = "hidden";
        document.getElementsByClassName('helpboxcont')[0].style.opacity = "0";
        helpout = 0;
      }
    }

    // For submitmodal
    window.onclick = function(event) {
      var modal = document.getElementsByClassName('submitmodal')[0]
      if (event.target == modal) {
        Submit_disappear();
      }
    }

    function final_submit(){
      localStorage.setItem("Score1", people + planet + profit);
      setTimeout(() => {
        window.location = "./OR2.html";
      }, "1000");
    }

  </script>
  <body>
    <div class="main">
      <div class="left_panel">
        <div class="grid_subpanel">
          <div class="main_grid">
            <!-- Start paste here -->
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C00_10' onclick='Click_Cell(00,10)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C01_09' onclick='Click_Cell(01,09)'></div>
              <div class='main_cell water_cell C01_10' onclick='Click_Cell(01,10)'></div>
              <div class='main_cell end_cell water_cell C01_11' onclick='Click_Cell(01,11)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C02_08' onclick='Click_Cell(02,08)'></div>
              <div class='main_cell water_cell C02_09' onclick='Click_Cell(02,09)'></div>
              <div class='main_cell water_cell C02_10' onclick='Click_Cell(02,10)'></div>
              <div class='main_cell water_cell C02_11' onclick='Click_Cell(02,11)'></div>
              <div class='main_cell end_cell water_cell C02_12' onclick='Click_Cell(02,12)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C03_07' onclick='Click_Cell(03,07)'></div>
              <div class='main_cell water_cell C03_08' onclick='Click_Cell(03,08)'></div>
              <div class='main_cell water_cell C03_09' onclick='Click_Cell(03,09)'></div>
              <div class='main_cell sandz_cell sandz_tree C03_10' onclick='Click_Cell(03,10)'></div>
              <div class='main_cell sandz_cell sandz_tree C03_11' onclick='Click_Cell(03,11)'></div>
              <div class='main_cell water_cell C03_12' onclick='Click_Cell(03,12)'></div>
              <div class='main_cell end_cell water_cell C03_13' onclick='Click_Cell(03,13)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C04_06' onclick='Click_Cell(04,06)'></div>
              <div class='main_cell water_cell C04_07' onclick='Click_Cell(04,07)'></div>
              <div class='main_cell water_cell C04_08' onclick='Click_Cell(04,08)'></div>
              <div class='main_cell sandz_cell C04_09' onclick='Click_Cell(04,09)'></div>
              <div class='main_cell leafz_cell leafz_tree C04_10' onclick='Click_Cell(04,10)'></div>
              <div class='main_cell grass_cell C04_11' onclick='Click_Cell(04,11)'></div>
              <div class='main_cell leafz_cell leafz_tree C04_12' onclick='Click_Cell(04,12)'></div>
              <div class='main_cell water_cell C04_13' onclick='Click_Cell(04,13)'></div>
              <div class='main_cell end_cell water_cell C04_14' onclick='Click_Cell(04,14)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C05_05' onclick='Click_Cell(05,05)'></div>
              <div class='main_cell water_cell C05_06' onclick='Click_Cell(05,06)'></div>
              <div class='main_cell water_cell C05_07' onclick='Click_Cell(05,07)'></div>
              <div class='main_cell water_cell C05_08' onclick='Click_Cell(05,08)'></div>
              <div class='main_cell sandz_cell C05_09' onclick='Click_Cell(05,09)'></div>
              <div class='main_cell grass_cell C05_10' onclick='Click_Cell(05,10)'></div>
              <div class='main_cell leafz_cell leafz_tree C05_11' onclick='Click_Cell(05,11)'></div>
              <div class='main_cell grass_cell C05_12' onclick='Click_Cell(05,12)'></div>
              <div class='main_cell sandz_cell C05_13' onclick='Click_Cell(05,13)'></div>
              <div class='main_cell water_cell C05_14' onclick='Click_Cell(05,14)'></div>
              <div class='main_cell end_cell water_cell C05_15' onclick='Click_Cell(05,15)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C06_04' onclick='Click_Cell(06,04)'></div>
              <div class='main_cell water_cell C06_05' onclick='Click_Cell(06,05)'></div>
              <div class='main_cell water_cell C06_06' onclick='Click_Cell(06,06)'></div>
              <div class='main_cell water_cell C06_07' onclick='Click_Cell(06,07)'></div>
              <div class='main_cell water_cell C06_08' onclick='Click_Cell(06,08)'></div>
              <div class='main_cell sandz_cell C06_09' onclick='Click_Cell(06,09)'></div>
              <div class='main_cell grass_cell C06_10' onclick='Click_Cell(06,10)'></div>
              <div class='main_cell grass_cell C06_11' onclick='Click_Cell(06,11)'></div>
              <div class='main_cell sandz_cell C06_12' onclick='Click_Cell(06,12)'></div>
              <div class='main_cell sandz_cell C06_13' onclick='Click_Cell(06,13)'></div>
              <div class='main_cell water_cell C06_14' onclick='Click_Cell(06,14)'></div>
              <div class='main_cell water_cell C06_15' onclick='Click_Cell(06,15)'></div>
              <div class='main_cell end_cell water_cell C06_16' onclick='Click_Cell(06,16)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C07_03' onclick='Click_Cell(07,03)'></div>
              <div class='main_cell water_cell C07_04' onclick='Click_Cell(07,04)'></div>
              <div class='main_cell water_cell C07_05' onclick='Click_Cell(07,05)'></div>
              <div class='main_cell water_cell C07_06' onclick='Click_Cell(07,06)'></div>
              <div class='main_cell water_cell C07_07' onclick='Click_Cell(07,07)'></div>
              <div class='main_cell sandz_cell sandz_tree C07_08' onclick='Click_Cell(07,08)'></div>
              <div class='main_cell grass_cell C07_09' onclick='Click_Cell(07,09)'></div>
              <div class='main_cell grass_cell C07_10' onclick='Click_Cell(07,10)'></div>
              <div class='main_cell sandz_cell sandz_tree C07_11' onclick='Click_Cell(07,11)'></div>
              <div class='main_cell sandz_cell C07_12' onclick='Click_Cell(07,12)'></div>
              <div class='main_cell sandz_cell C07_13' onclick='Click_Cell(07,13)'></div>
              <div class='main_cell sandz_cell C07_14' onclick='Click_Cell(07,14)'></div>
              <div class='main_cell water_cell C07_15' onclick='Click_Cell(07,15)'></div>
              <div class='main_cell water_cell C07_16' onclick='Click_Cell(07,16)'></div>
              <div class='main_cell end_cell water_cell C07_17' onclick='Click_Cell(07,17)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C08_02' onclick='Click_Cell(08,02)'></div>
              <div class='main_cell water_cell C08_03' onclick='Click_Cell(08,03)'></div>
              <div class='main_cell water_cell C08_04' onclick='Click_Cell(08,04)'></div>
              <div class='main_cell water_cell C08_05' onclick='Click_Cell(08,05)'></div>
              <div class='main_cell sandz_cell sandz_tree C08_06' onclick='Click_Cell(08,06)'></div>
              <div class='main_cell sandz_cell sandz_tree C08_07' onclick='Click_Cell(08,07)'></div>
              <div class='main_cell sandz_cell sandz_tree C08_08' onclick='Click_Cell(08,08)'></div>
              <div class='main_cell rockz_cell C08_09' onclick='Click_Cell(08,09)'></div>
              <div class='main_cell rockz_cell C08_10' onclick='Click_Cell(08,10)'></div>
              <div class='main_cell grass_cell C08_11' onclick='Click_Cell(08,11)'></div>
              <div class='main_cell grass_cell C08_12' onclick='Click_Cell(08,12)'></div>
              <div class='main_cell sandz_cell C08_13' onclick='Click_Cell(08,13)'></div>
              <div class='main_cell sandz_cell C08_14' onclick='Click_Cell(08,14)'></div>
              <div class='main_cell water_cell C08_15' onclick='Click_Cell(08,15)'></div>
              <div class='main_cell water_cell C08_16' onclick='Click_Cell(08,16)'></div>
              <div class='main_cell water_cell C08_17' onclick='Click_Cell(08,17)'></div>
              <div class='main_cell end_cell water_cell C08_18' onclick='Click_Cell(08,18)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C09_01' onclick='Click_Cell(09,01)'></div>
              <div class='main_cell water_cell C09_02' onclick='Click_Cell(09,02)'></div>
              <div class='main_cell water_cell C09_03' onclick='Click_Cell(09,03)'></div>
              <div class='main_cell water_cell C09_04' onclick='Click_Cell(09,04)'></div>
              <div class='main_cell water_cell C09_05' onclick='Click_Cell(09,05)'></div>
              <div class='main_cell water_cell C09_06' onclick='Click_Cell(09,06)'></div>
              <div class='main_cell sandz_cell sandz_tree C09_07' onclick='Click_Cell(09,07)'></div>
              <div class='main_cell rockz_cell rockz_moun C09_08' onclick='Click_Cell(09,08)'></div>
              <div class='main_cell rockz_cell rockz_moun C09_09' onclick='Click_Cell(09,09)'></div>
              <div class='main_cell rockz_cell C09_10' onclick='Click_Cell(09,10)'></div>
              <div class='main_cell grass_cell C09_11' onclick='Click_Cell(09,11)'></div>
              <div class='main_cell grass_cell C09_12' onclick='Click_Cell(09,12)'></div>
              <div class='main_cell grass_cell C09_13' onclick='Click_Cell(09,13)'></div>
              <div class='main_cell sandz_cell C09_14' onclick='Click_Cell(09,14)'></div>
              <div class='main_cell sandz_cell C09_15' onclick='Click_Cell(09,15)'></div>
              <div class='main_cell water_cell C09_16' onclick='Click_Cell(09,16)'></div>
              <div class='main_cell water_cell C09_17' onclick='Click_Cell(09,17)'></div>
              <div class='main_cell water_cell C09_18' onclick='Click_Cell(09,18)'></div>
              <div class='main_cell end_cell water_cell C09_19' onclick='Click_Cell(09,19)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C10_00' onclick='Click_Cell(10,00)'></div>
              <div class='main_cell water_cell C10_01' onclick='Click_Cell(10,01)'></div>
              <div class='main_cell water_cell C10_02' onclick='Click_Cell(10,02)'></div>
              <div class='main_cell water_cell C10_03' onclick='Click_Cell(10,03)'></div>
              <div class='main_cell water_cell C10_04' onclick='Click_Cell(10,04)'></div>
              <div class='main_cell water_cell C10_05' onclick='Click_Cell(10,05)'></div>
              <div class='main_cell water_cell C10_06' onclick='Click_Cell(10,06)'></div>
              <div class='main_cell sandz_cell sandz_tree C10_07' onclick='Click_Cell(10,07)'></div>
              <div class='main_cell rockz_cell C10_08' onclick='Click_Cell(10,08)'></div>
              <div class='main_cell rockz_cell rockz_moun C10_09' onclick='Click_Cell(10,09)'></div>
              <div class='main_cell grass_cell C10_10' onclick='Click_Cell(10,10)'></div>
              <div class='main_cell grass_cell C10_11' onclick='Click_Cell(10,11)'></div>
              <div class='main_cell grass_cell C10_12' onclick='Click_Cell(10,12)'></div>
              <div class='main_cell grass_cell C10_13' onclick='Click_Cell(10,13)'></div>
              <div class='main_cell sandz_cell sandz_tree C10_14' onclick='Click_Cell(10,14)'></div>
              <div class='main_cell sandz_cell C10_15' onclick='Click_Cell(10,15)'></div>
              <div class='main_cell water_cell C10_16' onclick='Click_Cell(10,16)'></div>
              <div class='main_cell water_cell C10_17' onclick='Click_Cell(10,17)'></div>
              <div class='main_cell water_cell C10_18' onclick='Click_Cell(10,18)'></div>
              <div class='main_cell water_cell C10_19' onclick='Click_Cell(10,19)'></div>
              <div class='main_cell end_cell water_cell C10_20' onclick='Click_Cell(10,20)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C11_01' onclick='Click_Cell(11,01)'></div>
              <div class='main_cell water_cell C11_02' onclick='Click_Cell(11,02)'></div>
              <div class='main_cell water_cell C11_03' onclick='Click_Cell(11,03)'></div>
              <div class='main_cell water_cell C11_04' onclick='Click_Cell(11,04)'></div>
              <div class='main_cell sandz_cell sandz_tree C11_05' onclick='Click_Cell(11,05)'></div>
              <div class='main_cell sandz_cell sandz_tree C11_06' onclick='Click_Cell(11,06)'></div>
              <div class='main_cell sandz_cell sandz_tree C11_07' onclick='Click_Cell(11,07)'></div>
              <div class='main_cell rockz_cell C11_08' onclick='Click_Cell(11,08)'></div>
              <div class='main_cell grass_cell C11_09' onclick='Click_Cell(11,09)'></div>
              <div class='main_cell grass_cell C11_10' onclick='Click_Cell(11,10)'></div>
              <div class='main_cell grass_cell C11_11' onclick='Click_Cell(11,11)'></div>
              <div class='main_cell grass_cell C11_12' onclick='Click_Cell(11,12)'></div>
              <div class='main_cell grass_cell C11_13' onclick='Click_Cell(11,13)'></div>
              <div class='main_cell sandz_cell C11_14' onclick='Click_Cell(11,14)'></div>
              <div class='main_cell sandz_cell C11_15' onclick='Click_Cell(11,15)'></div>
              <div class='main_cell water_cell C11_16' onclick='Click_Cell(11,16)'></div>
              <div class='main_cell water_cell C11_17' onclick='Click_Cell(11,17)'></div>
              <div class='main_cell water_cell C11_18' onclick='Click_Cell(11,18)'></div>
              <div class='main_cell end_cell water_cell C11_19' onclick='Click_Cell(11,19)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C12_02' onclick='Click_Cell(12,02)'></div>
              <div class='main_cell water_cell C12_03' onclick='Click_Cell(12,03)'></div>
              <div class='main_cell water_cell C12_04' onclick='Click_Cell(12,04)'></div>
              <div class='main_cell sandz_cell sandz_tree C12_05' onclick='Click_Cell(12,05)'></div>
              <div class='main_cell grass_cell grass_moun C12_06' onclick='Click_Cell(12,06)'></div>
              <div class='main_cell grass_cell C12_07' onclick='Click_Cell(12,07)'></div>
              <div class='main_cell grass_cell C12_08' onclick='Click_Cell(12,08)'></div>
              <div class='main_cell grass_cell C12_09' onclick='Click_Cell(12,09)'></div>
              <div class='main_cell grass_cell C12_10' onclick='Click_Cell(12,10)'></div>
              <div class='main_cell grass_cell C12_11' onclick='Click_Cell(12,11)'></div>
              <div class='main_cell sandz_cell C12_12' onclick='Click_Cell(12,12)'></div>
              <div class='main_cell sandz_cell sandz_tree C12_13' onclick='Click_Cell(12,13)'></div>
              <div class='main_cell sandz_cell C12_14' onclick='Click_Cell(12,14)'></div>
              <div class='main_cell sandz_cell C12_15' onclick='Click_Cell(12,15)'></div>
              <div class='main_cell water_cell C12_16' onclick='Click_Cell(12,16)'></div>
              <div class='main_cell water_cell C12_17' onclick='Click_Cell(12,17)'></div>
              <div class='main_cell end_cell water_cell C12_18' onclick='Click_Cell(12,18)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C13_03' onclick='Click_Cell(13,03)'></div>
              <div class='main_cell water_cell C13_04' onclick='Click_Cell(13,04)'></div>
              <div class='main_cell water_cell C13_05' onclick='Click_Cell(13,05)'></div>
              <div class='main_cell leafz_cell leafz_tree C13_06' onclick='Click_Cell(13,06)'></div>
              <div class='main_cell grass_cell C13_07' onclick='Click_Cell(13,07)'></div>
              <div class='main_cell leafz_cell leafz_tree C13_08' onclick='Click_Cell(13,08)'></div>
              <div class='main_cell grass_cell C13_09' onclick='Click_Cell(13,09)'></div>
              <div class='main_cell grass_cell C13_10' onclick='Click_Cell(13,10)'></div>
              <div class='main_cell sandz_cell C13_11' onclick='Click_Cell(13,11)'></div>
              <div class='main_cell sandz_cell C13_12' onclick='Click_Cell(13,12)'></div>
              <div class='main_cell sandz_cell C13_13' onclick='Click_Cell(13,13)'></div>
              <div class='main_cell sandz_cell C13_14' onclick='Click_Cell(13,14)'></div>
              <div class='main_cell water_cell C13_15' onclick='Click_Cell(13,15)'></div>
              <div class='main_cell water_cell C13_16' onclick='Click_Cell(13,16)'></div>
              <div class='main_cell end_cell water_cell C13_17' onclick='Click_Cell(13,17)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C14_04' onclick='Click_Cell(14,04)'></div>
              <div class='main_cell water_cell C14_05' onclick='Click_Cell(14,05)'></div>
              <div class='main_cell sandz_cell sandz_tree C14_06' onclick='Click_Cell(14,06)'></div>
              <div class='main_cell sandz_cell sandz_tree C14_07' onclick='Click_Cell(14,07)'></div>
              <div class='main_cell grass_cell C14_08' onclick='Click_Cell(14,08)'></div>
              <div class='main_cell leafz_cell leafz_tree C14_09' onclick='Click_Cell(14,09)'></div>
              <div class='main_cell grass_cell C14_10' onclick='Click_Cell(14,10)'></div>
              <div class='main_cell grass_cell C14_11' onclick='Click_Cell(14,11)'></div>
              <div class='main_cell sandz_cell sandz_tree C14_12' onclick='Click_Cell(14,12)'></div>
              <div class='main_cell sandz_cell C14_13' onclick='Click_Cell(14,13)'></div>
              <div class='main_cell water_cell C14_14' onclick='Click_Cell(14,14)'></div>
              <div class='main_cell water_cell C14_15' onclick='Click_Cell(14,15)'></div>
              <div class='main_cell end_cell water_cell C14_16' onclick='Click_Cell(14,16)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C15_05' onclick='Click_Cell(15,05)'></div>
              <div class='main_cell water_cell C15_06' onclick='Click_Cell(15,06)'></div>
              <div class='main_cell sandz_cell sandz_tree C15_07' onclick='Click_Cell(15,07)'></div>
              <div class='main_cell sandz_cell sandz_tree C15_08' onclick='Click_Cell(15,08)'></div>
              <div class='main_cell grass_cell C15_09' onclick='Click_Cell(15,09)'></div>
              <div class='main_cell grass_cell C15_10' onclick='Click_Cell(15,10)'></div>
              <div class='main_cell grass_cell C15_11' onclick='Click_Cell(15,11)'></div>
              <div class='main_cell sandz_cell C15_12' onclick='Click_Cell(15,12)'></div>
              <div class='main_cell water_cell C15_13' onclick='Click_Cell(15,13)'></div>
              <div class='main_cell water_cell C15_14' onclick='Click_Cell(15,14)'></div>
              <div class='main_cell end_cell water_cell C15_15' onclick='Click_Cell(15,15)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C16_06' onclick='Click_Cell(16,06)'></div>
              <div class='main_cell water_cell C16_07' onclick='Click_Cell(16,07)'></div>
              <div class='main_cell sandz_cell sandz_tree C16_08' onclick='Click_Cell(16,08)'></div>
              <div class='main_cell leafz_cell leafz_tree C16_09' onclick='Click_Cell(16,09)'></div>
              <div class='main_cell grass_cell C16_10' onclick='Click_Cell(16,10)'></div>
              <div class='main_cell sandz_cell C16_11' onclick='Click_Cell(16,11)'></div>
              <div class='main_cell sandz_cell C16_12' onclick='Click_Cell(16,12)'></div>
              <div class='main_cell water_cell C16_13' onclick='Click_Cell(16,13)'></div>
              <div class='main_cell end_cell water_cell C16_14' onclick='Click_Cell(16,14)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C17_07' onclick='Click_Cell(17,07)'></div>
              <div class='main_cell water_cell C17_08' onclick='Click_Cell(17,08)'></div>
              <div class='main_cell sandz_cell C17_09' onclick='Click_Cell(17,09)'></div>
              <div class='main_cell water_cell C17_10' onclick='Click_Cell(17,10)'></div>
              <div class='main_cell water_cell C17_11' onclick='Click_Cell(17,11)'></div>
              <div class='main_cell water_cell C17_12' onclick='Click_Cell(17,12)'></div>
              <div class='main_cell end_cell water_cell C17_13' onclick='Click_Cell(17,13)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C18_08' onclick='Click_Cell(18,08)'></div>
              <div class='main_cell water_cell C18_09' onclick='Click_Cell(18,09)'></div>
              <div class='main_cell water_cell C18_10' onclick='Click_Cell(18,10)'></div>
              <div class='main_cell water_cell C18_11' onclick='Click_Cell(18,11)'></div>
              <div class='main_cell end_cell water_cell C18_12' onclick='Click_Cell(18,12)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C19_09' onclick='Click_Cell(19,09)'></div>
              <div class='main_cell water_cell C19_10' onclick='Click_Cell(19,10)'></div>
              <div class='main_cell end_cell water_cell C19_11' onclick='Click_Cell(19,11)'></div>
              </div>
              <div class='subgrid'>
              <div class='main_cell end_cell water_cell C20_10' onclick='Click_Cell(20,10)'></div>
              </div>
            <!-- End paste here -->
          </div>
        </div>
        <div class="bottom_subpanel">
          <div class="buildings" onclick="Tool_Building(1)">
            <img src="Images/building1.png" alt="">
            <span class="buildingtext">
              <h1>Local Store</h1>
              <p>+10 profit | -5 planet</p>
            </span>
            <h3>1M</h3>
          </div>
          <div class="buildings" onclick="Tool_Building(2)">
            <img src="Images/building2.png" alt="">
            <span class="buildingtext">
              <h1>Office Building</h1>
              <p>+20 profit | -20 planet</p>
            </span>
            <h3>1.5M</h3>
          </div>
          <div class="buildings" onclick="Tool_Building(3)">
            <img src="Images/building3.png" alt="">
            <span class="buildingtext">
              <h1>Neighborhood</h1>
              <p>+20 people | -5 planet </p>
            </span>
            <h3>1.5M</h3>
          </div>
          <div class="buildings" onclick="Tool_Building(4)">
            <img src="Images/building4.png" alt="">
            <span class="buildingtext">
              <h1>Hotel</h1>
              <p>+20 people | +10 profit | -20 planet</p>
            </span>
            <h3>3M</h3>
          </div>
          <div class="buildings" onclick="Tool_Building(5)">
            <img src="Images/building5.png" alt="">
            <span class="buildingtext">
              <h1>Windmills</h1>
              <p>Gives electricity to a radius</p>
              <p>-10 planet</p>
            </span>
            <h3>5M</h3>
          </div>
          <div class="buildings" onclick="Tool_Building(6)">
            <img src="Images/building6.png" alt="">
            <span class="buildingtext">
              <h1>Road</h1>
              <p>Basic infrastructure!</p>
            </span>
            <h3>0.5M</h3>
          </div>
        </div>
      </div>
      <div class="right_panel">
        <div class="right_title">
          <h1>Level 1: Island Paradise</h1>
          <p>Welcome to the island paradise, where you can craft your very own dreamy island getaway.</p>
        </div>
        <div class="right_budget">
          <p>Budget Remaining:</p>
          <span class="budget">40M</span>
          <img class="budget_img" src="Images/Check.png" alt="">
        </div>
        <div class="conditions">
          <h1>CONDITIONS:</h1>
          <div class="conditions_box">
            <div class="condition_item">
              <p>Always have more people than profit</p>
              <img class="condition_img" src="Images/Check.png" alt="">
            </div>
            <div class="condition_item">
              <p>Roads must connect airport and seaport</p>
              <img class="condition_img" src="Images/Check.png" alt="">
            </div>
            <div class="condition_item">
              <p>Buildings must be connected to roads</p>
              <img class="condition_img" src="Images/Check.png" alt="">
            </div>
            <div class="condition_item">
              <p>Buildings must be powered by windmills</p>
              <img class="condition_img" src="Images/Check.png" alt="">
            </div>
            <div class="condition_item">
              <p>Windmills have bigger radius on mountains</p>
              <img class="condition_img" src="Images/bonus.png" alt="">
            </div>
            <div class="condition_item">
              <p>Hotels have a +5 profit on beaches</p>
              <img class="condition_img" src="Images/bonus.png" alt="">
            </div>
          </div>
        </div>
        <div class="Score">
          <h1>Total Scores:</h1>
          <div class="ScoreGrid">
            <div class="subscore">
              People:
            </div>
            <div class="subscore">
              0 points
            </div>
            <div class="subscore">
              Planet:
            </div>
            <div class="subscore">
              500 points
            </div>
            <div class="subscore">
              Profit:
            </div>
            <div class="subscore">
              0 points
            </div>
            <div class="subscore totalscore">
              Total:
            </div>
            <div class="subscore totalscore">
              500 points
            </div>
          </div>
        </div>
        <div class="Submit" onclick="Submit_appear()">
          SUBMIT
        </div>
      </div>
      <div class="submitmodal">
        <div class="confirmsubmit">
          <div class="submit_top">
            Submit to proceed to the next level
          </div>

          <div class="buttons">
            <div class="butto yessubmit" onclick="final_submit()">
              Submit
            </div>
            <div class="butto nosubmit" onclick="Submit_disappear()">
              Go Back
            </div>
          </div>

        </div>
      </div>
    </div>
    <div class="helpboxcont">
      <div class="helpbox">
        <img class="helpcancel" src="Images/Delete.png" draggable="false" onclick="help()" alt="">
        <h1>Level 1: INSTRUCTIONS</h1>
        <div class="flexofthegrid">
          <div class="helpgrid">
            <div class="helpgriditem">
              <img src="Images/help1.png" alt="">
              <p>1. This is the map, where you will be interacting mostly</p>
            </div>
            <div class="helpgriditem">
              <img src="Images/help2.png" alt="">
              <p>2. Click empty space to add building</p>
            </div>
            <div class="helpgriditem">
              <img src="Images/help3.png" alt="">
              <p>3. Click building to remove</p>
            </div>
            <div class="helpgriditem">
              <img src="Images/help4.png" alt="">
              <div>
                <p>4. To change building type, use building toolbar below</p>
                <u>*Note that "Planet" is a negative value therefore reduces the total score</u>
              </div>
            </div>
          </div>
          <div class="helpgrid">
            <div class="helpgriditem">
              <img src="Images/help5.png" alt="">
              <div>
                <p>5. You must fullfill conditions in your build, as seen on the right</p>
                <u>*Tip: Buildings with an error means it does not fullfill the conditions*</u>
                <!-- <p>Budget: You must not exceed your budget</p>
                <p>Condition 1: Your total score for people should be greater than or equal to your total score for profit</p>
                <p>Condition 2: There must be a road connecting the airport to the seaport, this is your main road</p>
                <p>Condition 3: All buildings (excluding windmills) must be connected to the main road</p>
                <p>Condition 4: All buildings (excluding windmills) must be within the range of the windmill (denoted by grayed out cells)</p>
                <p>Condition 5: BONUS: Windmills on mountains (dark gray spaces) will have a +1 radius of effect</p>
                <p>Condition 6: BONUS: Each resort placed on the beach will have a +5 profit</p> -->
              </div>
            </div>
            <div class="helpgriditem">
              <img src="Images/help6.png" alt="">
              <p>6. You will be graded by your scores on "People", "Planet", and "Profit"</p>
            </div>
            <div class="helpgriditem">
              <img src="Images/help7.png" alt="">
              <p>7. Click Submit when done!</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="help" onclick="help()">
      Need help?
      <img src="Images/question.png" alt="">
    </div>

  </body>
</html>
